---
import { Icon } from 'astro-icon/components'
---

<button
  type='button'
  id='theme-toggle'
  class='ml-4 inline-flex items-center justify-center rounded-md text-sm
         font-medium ring-offset-background transition-colors
         focus-visible:outline-none focus-visible:ring-2
         focus-visible:ring-ring focus-visible:ring-offset-2
         disabled:pointer-events-none disabled:opacity-50
         hover:bg-accent hover:text-accent-foreground
         h-10 w-10 relative'
  aria-label='Toggle theme'
>
  <Icon
    name='sun'
    class='h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0'
  />
  <Icon
    name='moon'
    class='absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100'
  />
  <span class='sr-only'>Toggle theme</span>
</button>

<script>
  // Add click handler to toggle theme
  const themeToggle = document.getElementById('theme-toggle')
  if (themeToggle) {
    themeToggle.addEventListener('click', () => {
      // Call the global function defined in ThemeProvider
      window.handleThemeChange()
    })
  }
</script>
